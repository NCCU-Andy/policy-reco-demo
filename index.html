<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>法國巴黎人壽｜智能保單推薦系統 Demo</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="brand">
        <div class="logo">法</div>
        <div class="brand-text">
          <h1>法國巴黎人壽｜智能保單推薦系統</h1>
          <p>運用相似客群投保輪廓，提供個人化保險規劃建議</p>
        </div>
      </div>
      <div class="status-badge">🚀 商業競賽 Demo 版本</div>
    </div>
  </header>

  <div class="container">
    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="step active" id="step1">
        <div class="step-number">1</div>
        <div class="step-label">填寫資料</div>
      </div>
      <div class="step" id="step2">
        <div class="step-number">2</div>
        <div class="step-label">分析比對</div>
      </div>
      <div class="step" id="step3">
        <div class="step-number">3</div>
        <div class="step-label">方案推薦</div>
      </div>
      <div class="step" id="step4">
        <div class="step-number">4</div>
        <div class="step-label">生成報告</div>
      </div>
    </div>

    <div class="layout">
      <!-- Left stack: Input + new helper cards -->
      <div class="left-stack">
        <!-- Left: Input -->
        <div class="card">
          <div class="card-header">
            <h2>📋 客戶資料輸入</h2>
            <p>請填寫以下資訊，系統將自動匹配相似客群投保輪廓</p>
          </div>

          <div class="card-body">
            <!-- Consent -->
            <div class="consent-box">
              <input id="agree" type="checkbox" />
              <div class="text">
                <strong>⚠️ 重要聲明（Demo 版本）</strong>
                本工具僅供概念展示：資料不會上傳伺服器；內容為輔助理解之建議，不構成投保/投資/稅務建議；實際投保以法巴保單條款、核保與銀行通路規範為準。
              </div>
            </div>

            <!-- Form Fields -->
            <div class="form-grid">
              <!-- 性別 -->
              <div class="field" data-field="gender">
                <label class="field-label">性別</label>
                <div class="options cols-2">
                  <button class="option-btn" data-field="gender" data-value="生理男" aria-pressed="false">👨 生理男</button>
                  <button class="option-btn" data-field="gender" data-value="生理女" aria-pressed="false">👩 生理女</button>
                </div>
              </div>

              <!-- 年齡段 -->
              <div class="field" data-field="ageBand">
                <label class="field-label">年齡段（10歲一區間）</label>
                <div class="options cols-4">
                  <button class="option-btn" data-field="ageBand" data-value="0-9" aria-pressed="false">0–9</button>
                  <button class="option-btn" data-field="ageBand" data-value="10-19" aria-pressed="false">10–19</button>
                  <button class="option-btn" data-field="ageBand" data-value="20-29" aria-pressed="false">20–29</button>
                  <button class="option-btn" data-field="ageBand" data-value="30-39" aria-pressed="false">30–39</button>
                  <button class="option-btn" data-field="ageBand" data-value="40-49" aria-pressed="false">40–49</button>
                  <button class="option-btn" data-field="ageBand" data-value="50-59" aria-pressed="false">50–59</button>
                  <button class="option-btn" data-field="ageBand" data-value="60-69" aria-pressed="false">60–69</button>
                  <button class="option-btn" data-field="ageBand" data-value="70+" aria-pressed="false">70+</button>
                </div>
              </div>

              <!-- 職業 -->
              <div class="field" data-field="jobTitle">
                <label class="field-label">職業（輸入後自動判斷等級）</label>
                <input id="jobTitle" type="text" class="text-input" placeholder="例如：工程師、護理師、貨車司機..." />
                <div class="field-hint" id="jobHint">系統判斷：<strong>尚未判斷</strong></div>
              </div>

              <!-- 職業風險等級 -->
              <div class="field" data-field="jobRisk">
                <label class="field-label">職業風險等級（可手動調整）</label>
                <div class="options cols-3">
                  <button class="option-btn" data-field="jobRisk" data-value="1" aria-pressed="false">等級一</button>
                  <button class="option-btn" data-field="jobRisk" data-value="2" aria-pressed="false">等級二</button>
                  <button class="option-btn" data-field="jobRisk" data-value="3" aria-pressed="false">等級三</button>
                  <button class="option-btn" data-field="jobRisk" data-value="4" aria-pressed="false">等級四</button>
                  <button class="option-btn" data-field="jobRisk" data-value="5" aria-pressed="false">等級五</button>
                  <button class="option-btn" data-field="jobRisk" data-value="6" aria-pressed="false">等級六</button>
                </div>
              </div>

              <!-- 年收入 -->
              <div class="field" data-field="income">
                <label class="field-label">年收入</label>
                <div class="options cols-2">
                  <button class="option-btn" data-field="income" data-value="70萬以下" aria-pressed="false">70萬以下</button>
                  <button class="option-btn" data-field="income" data-value="70萬到150萬" aria-pressed="false">70萬到150萬</button>
                  <button class="option-btn" data-field="income" data-value="150萬到300萬" aria-pressed="false">150萬到300萬</button>
                  <button class="option-btn" data-field="income" data-value="300萬以上" aria-pressed="false">300萬以上</button>
                  <button class="option-btn" data-field="income" data-value="暫不提供" aria-pressed="false">暫不提供</button>
                </div>
              </div>

              <!-- 家庭結構 -->
              <div class="field" data-field="family">
                <label class="field-label">家庭結構</label>
                <div class="options cols-3">
                  <button class="option-btn" data-field="family" data-value="單人戶" aria-pressed="false">單人戶</button>
                  <button class="option-btn" data-field="family" data-value="夫妻家庭" aria-pressed="false">夫妻家庭</button>
                  <button class="option-btn" data-field="family" data-value="單親家庭" aria-pressed="false">單親家庭</button>
                  <button class="option-btn" data-field="family" data-value="核心家庭" aria-pressed="false">核心家庭</button>
                  <button class="option-btn" data-field="family" data-value="祖孫家庭" aria-pressed="false">祖孫家庭</button>
                  <button class="option-btn" data-field="family" data-value="三代家庭" aria-pressed="false">三代家庭</button>
                </div>
              </div>
            </div>

            <!-- 投保需求 -->
            <div class="field" data-field="needs">
              <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:10px;">
                <label class="field-label" style="margin:0;">投保需求為何？（可複選）</label>
                <button class="btn btn-secondary" id="autoNeeds" type="button" style="padding:8px 12px; font-size:12px;">
                  ✨ 不確定？幫我推薦
                </button>
              </div>
              <div class="checkbox-grid" id="needs">
                <label class="checkbox-card">
                  <input type="checkbox" value="保障型保單" />
                  <div class="label"><strong>🛡️ 保障型</strong><small>醫療/意外/重大傷病/壽險缺口補強</small></div>
                </label>
                <label class="checkbox-card">
                  <input type="checkbox" value="儲蓄型保單" />
                  <div class="label"><strong>💰 儲蓄型</strong><small>穩健資金準備、偏保守</small></div>
                </label>
                <label class="checkbox-card">
                  <input type="checkbox" value="還本型保單" />
                  <div class="label"><strong>🔄 還本型</strong><small>期滿返還設計（注意條款限制）</small></div>
                </label>
                <label class="checkbox-card">
                  <input type="checkbox" value="投資型保單" />
                  <div class="label"><strong>📈 投資型</strong><small>追求報酬、承擔波動（非保本）</small></div>
                </label>
              </div>
            </div>

            <!-- Actions -->
            <div class="actions">
              <button class="btn btn-primary" id="run" disabled>🔍 分析並產生推薦方案</button>
              <button class="btn btn-secondary" id="genReport" disabled>📄 生成理專報告</button>
              <button class="btn btn-secondary" id="copyReport" disabled>📋 複製報告</button>
              <button class="btn btn-secondary" id="reset">🔄 清除重填</button>
            </div>

            <div class="alert alert-warning" id="hint" style="display:none;"></div>
          </div>
        </div>

        <!-- 新增：進度追蹤 -->
        <div class="mini">
          <div class="mini-head">
            <h3>✅ 填寫進度</h3>
            <div style="font-size:12px;color:var(--text-muted);font-weight:900;" id="draftState">草稿：未儲存</div>
          </div>
          <div class="mini-body">
            <div class="progress-wrap">
              <div class="bar"><div id="progressFill"></div></div>
              <div class="pct" id="progressPct">0%</div>
            </div>
            <div style="margin-top:10px;font-size:12px;color:var(--text-secondary);">
              必填：性別／年齡段／職業等級／年收入／家庭結構 + 勾選聲明
            </div>
          </div>
        </div>

        <!-- 新增：快速預覽 -->
        <div class="mini">
          <div class="mini-head">
            <h3>👀 即時預覽</h3>
            <div style="font-size:12px;color:var(--text-muted);font-weight:900;" id="previewTag">尚未完成</div>
          </div>
          <div class="mini-body">
            <div class="kv" id="livePreview">
              <div>性別</div><div>—</div>
              <div>年齡段</div><div>—</div>
              <div>職業</div><div>—</div>
              <div>等級</div><div>—</div>
              <div>年收入</div><div>—</div>
              <div>家庭</div><div>—</div>
              <div>需求</div><div>—</div>
            </div>
          </div>
        </div>

        <!-- 新增：情境推薦 -->
        <div class="mini">
          <div class="mini-head">
            <h3>💡 情境推薦</h3>
            <div style="font-size:12px;color:var(--text-muted);font-weight:900;">即時提示</div>
          </div>
          <div class="mini-body">
            <div class="insight" id="scenarioTip">
              先完成基本資料，系統會根據相似客群資料庫，提供「像您這樣的客戶通常會先做什麼」的提示。
            </div>
          </div>
        </div>

        <!-- 新增：FAQ / 說明表 -->
        <div class="mini">
          <div class="mini-head">
            <h3>📚 輔助資訊</h3>
            <div style="font-size:12px;color:var(--text-muted);font-weight:900;">可折疊</div>
          </div>
          <div class="mini-body">
            <div class="acc-item" id="accWhy">
              <button class="acc-btn" type="button">
                為什麼需要這些資料？（FAQ）<span>▾</span>
              </button>
              <div class="acc-panel">
                這些欄位的目的，是讓理專能在「合規與適配」前提下，快速理解客戶需求與風險：<br/>
                • <b>年齡/家庭</b>：推估責任期、扶養需求、照護風險<br/>
                • <b>職業等級</b>：影響意外/失能風險暴露與可承保條件<br/>
                • <b>年收入</b>：協助保費可負擔性與方案規模評估（可選「暫不提供」）<br/>
                • <b>需求偏好</b>：幫助決定先保障、再儲蓄/投資的排序<br/><br/>
                Demo 版不會上傳任何資料；正式版會搭配 KYC/適合度問卷與條款檢核。
              </div>
            </div>

            <div class="acc-item" id="accRisk">
              <button class="acc-btn" type="button">
                職業風險等級說明表<span>▾</span>
              </button>
              <div class="acc-panel">
                <table>
                  <thead>
                    <tr><th>等級</th><th>常見型態（示例）</th><th>風險概念</th></tr>
                  </thead>
                  <tbody>
                    <tr><td><b>1</b></td><td>行政、會計、工程師、金融內勤</td><td>多為室內工作，意外暴露較低</td></tr>
                    <tr><td><b>2</b></td><td>業務、門市、一般服務業</td><td>外勤/移動增加，風險中低</td></tr>
                    <tr><td><b>3</b></td><td>護理/照服、物流、技術員</td><td>體力活動提升，風險中等</td></tr>
                    <tr><td><b>4</b></td><td>機械維修、搬運、倉儲作業</td><td>工作環境風險顯著提升</td></tr>
                    <tr><td><b>5</b></td><td>工地、貨車司機、外送、消防</td><td>高暴露/高危險活動</td></tr>
                    <tr><td><b>6</b></td><td>高空作業、重工、特殊危險工</td><td>極高風險，承保限制更多</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="acc-item" id="accType">
              <button class="acc-btn" type="button">
                保單類型快速對照表<span>▾</span>
              </button>
              <div class="acc-panel">
                <table>
                  <thead>
                    <tr><th>類型</th><th>主要目的</th><th>理專提醒</th></tr>
                  </thead>
                  <tbody>
                    <tr><td><b>保障型</b></td><td>醫療/意外/重大傷病/壽險缺口</td><td>先做保障排序，再談儲蓄/投資</td></tr>
                    <tr><td><b>儲蓄型</b></td><td>資金準備、穩健累積</td><td>注意解約費用與期間安排</td></tr>
                    <tr><td><b>還本型</b></td><td>偏好返還/期滿設計</td><td>返還條件必須對客說清楚</td></tr>
                    <tr><td><b>投資型</b></td><td>追求報酬、承擔波動</td><td>非存款不保本，費用/淨值波動要揭露</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div style="font-size:12px;color:var(--text-muted);margin-top:8px;">
              小提醒：這些說明文字很加分，評審會覺得你們懂合規/適配。
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Output -->
      <div class="output-section">
        <div class="card">
          <div class="card-header">
            <h2>📊 分析結果與推薦方案</h2>
            <p>基於相似客群投保輪廓的智能推薦</p>
          </div>

          <div class="card-body">
            <!-- Loader (AI 模擬分析進度) -->
            <div class="loader" id="loader">
              <div class="loader-top">
                <div>🤖 AI 分析中：正在匹配相似客群、彙整保額、生成報告架構…</div>
                <div id="loaderPct">0%</div>
              </div>
              <div class="loader-bar"><div id="loaderFill"></div></div>
            </div>

            <!-- Summary -->
            <div class="section-title">客戶摘要</div>
            <div class="summary-card" id="summary"><div class="empty-state">尚未生成</div></div>

            <!-- Tabs -->
            <div class="tabs" style="margin-top:6px;">
              <button class="tab active" data-tab="t-sim">👥 相似輪廓</button>
              <button class="tab" data-tab="t-reco">🎯 建議方案</button>
              <button class="tab" data-tab="t-report">📝 理專報告</button>
            </div>

            <div id="t-sim" class="tab-panel active">
              <div class="section-title">相似族群投保輪廓（Top 3）</div>
              <div id="similar"><div class="empty-state">尚未生成</div></div>
            </div>

            <div id="t-reco" class="tab-panel">
              <div class="section-title">法巴建議方案（示意）</div>
              <div id="reco"><div class="empty-state">尚未生成</div></div>
            </div>

            <div id="t-report" class="tab-panel">
              <div class="section-title">理專報告（AI 文字 Demo）</div>

              <!-- TL;DR -->
              <div class="tldr" id="tldr" style="display:none;">
                <strong>TL;DR（重點摘要）</strong><br/>
                <div id="tldrText" style="margin-top:6px;"></div>
              </div>

              <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
                <div style="font-size:12px;color:var(--text-muted);font-weight:800;">
                  可收合：報告詳細內容（方便理專快速看重點）
                </div>
                <button class="btn btn-secondary" id="toggleReport" type="button" style="padding:8px 12px;font-size:12px;" disabled>
                  ▾ 展開/收合
                </button>
              </div>

              <div class="report-box" id="reportBox">尚未生成</div>

              <p style="font-size:12px;color:var(--text-muted);margin-top:14px;line-height:1.6;">
                <strong>提醒：</strong>此為概念 Demo。正式版需再加入：條款/等待期/除外責任檢核、核保限制、保費估算、KYC/適合度確認與資料治理。
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Floating action bar -->
    <div class="fab" id="fab">
      <button class="fab-btn alt" id="fabPrint" type="button">🖨️ 列印/下載PDF</button>
      <button class="fab-btn alt" id="fabShare" type="button">🔗 分享</button>
      <button class="fab-btn" id="fabCopy" type="button">📋 複製報告</button>
    </div>

    <div class="toast" id="toast">已儲存</div>
  </div>

  <script src="index.js"></script>
</body>
</html>
